<header>
    <nav>
        <div class="logo-container">
            <span class="logo-icon">üìÖ</span>
            <div class="logo">Campus Event Hub</div>
        </div>
        <ul id="mainNav">
            <li><a href="/" class="nav-link" data-page="home">Home</a></li>
            <li class="dropdown">
                <a href="/events" class="nav-link dropdown-toggle" data-page="events">Events</a>
                <ul class="dropdown-menu">
                    <li><a href="/events" class="dropdown-item">All Events</a></li>
                    <li><a href="/organizer/my-events" class="dropdown-item">My Events</a></li>
                    <li><a href="/organizer" class="dropdown-item">Create Event</a></li>
                </ul>
            </li>
            <li><a href="/student/registrations" class="nav-link" data-page="registrations">My Registrations</a></li>
            <li><a href="/admin" class="nav-link" data-page="admin">Admin Panel</a></li>
        </ul>
        <div id="authLinks">
            <button id="darkModeToggle" class="profile-btn"><span>üåô</span> Dark Mode</button>
            <div class="profile-dropdown">
                <button class="profile-btn" id="profileBtn">
                    <span id="userDisplay">üë§ Guest</span>
                </button>
                <ul class="profile-menu">
                    <li><a href="/profile" class="profile-item">Profile</a></li>
                    <li><a href="/settings" class="profile-item">Settings</a></li>
                    <li id="authItems">
                        <a href="/auth/login" class="profile-item" id="loginLink">Login</a>
                        <a href="/auth/register" class="profile-item" id="registerLink">Register</a>
                    </li>
                    <li id="logoutItem" style="display: none;">
                        <a href="#" class="profile-item" id="logoutLink">Logout</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
</header>

<style>
    /* Dark mode toggle button */
    #darkModeToggle {
        background: rgba(255, 255, 255, 0.15);
        color: white;
        border: 2px solid rgba(255, 255, 255, 0.3);
        border-radius: 25px;
        padding: 0.65rem 1rem;
        cursor: pointer;
        font-weight: 500;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        gap: 0.5rem;
        margin-right: 1rem;
        min-height: 44px;
    }
    
    #darkModeToggle:hover {
        background: rgba(255, 255, 255, 0.25);
        transform: translateY(-2px);
    }
    
    .dark-mode #darkModeToggle {
        background: rgba(255, 255, 255, 0.15);
        color: var(--text-white);
        border: 2px solid rgba(255, 255, 255, 0.3);
    }
    
    .dark-mode #darkModeToggle:hover {
        background: rgba(255, 255, 255, 0.25);
    }
</style>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Check for saved user data
        const token = localStorage.getItem('token');
        const userData = localStorage.getItem('user');
        
        // Update UI based on authentication status
        if (token && userData) {
            const user = JSON.parse(userData);
            document.getElementById('userDisplay').textContent = user.name || user.email || 'User';
            document.getElementById('authItems').style.display = 'none';
            document.getElementById('logoutItem').style.display = 'block';
        }
        
        // Profile dropdown functionality
        const profileBtn = document.querySelector('.profile-btn');
        const profileMenu = document.querySelector('.profile-menu');
        
        if (profileBtn && profileMenu) {
            profileBtn.addEventListener('click', function(e) {
                e.preventDefault();
                profileMenu.classList.toggle('show');
            });
            
            // Close dropdown when clicking outside
            document.addEventListener('click', function(e) {
                if (!profileBtn.contains(e.target) && !profileMenu.contains(e.target)) {
                    profileMenu.classList.remove('show');
                }
            });
        }
        
        // Logout functionality
        const logoutLink = document.getElementById('logoutLink');
        if (logoutLink) {
            logoutLink.addEventListener('click', function(e) {
                e.preventDefault();
                // Clear token and user data from localStorage
                localStorage.removeItem('token');
                localStorage.removeItem('user');
                
                // Redirect to home page
                window.location.href = '/';
            });
        }
        
        // Dark mode functionality
        const darkModeToggle = document.getElementById('darkModeToggle');
        const body = document.body;
        
        // Check for saved dark mode preference
        const savedDarkMode = localStorage.getItem('darkMode');
        if (savedDarkMode === 'enabled') {
            body.classList.add('dark-mode');
            if (darkModeToggle) {
                darkModeToggle.innerHTML = '<span>‚òÄÔ∏è</span> Light Mode';
            }
        }
        
        // Toggle dark mode
        if (darkModeToggle) {
            darkModeToggle.addEventListener('click', function() {
                body.classList.toggle('dark-mode');
                
                // Save preference
                if (body.classList.contains('dark-mode')) {
                    localStorage.setItem('darkMode', 'enabled');
                    this.innerHTML = '<span>‚òÄÔ∏è</span> Light Mode';
                } else {
                    localStorage.setItem('darkMode', 'disabled');
                    this.innerHTML = '<span>üåô</span> Dark Mode';
                }
            });
        }
    });
</script>